<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Control</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #31473A;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            height: 100vh;
        }
        .container {
            background-color: #FFFFFF;
            color: #31473A;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 800px;
            margin-top: 50px;
        }
        h1 {
            background-color: #31473A;
            color: #FFFFFF;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        button {
            background-color: #31473A;
            color: #FFFFFF;
            border: none;
            padding: 8px 16px;
            margin: 5px 0;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            text-align: left;
            font-size: 14px;
            transition: background-color 0.3s, color 0.3s, transform 0.3s;
        }
        button:hover {
            background-color: #FFFFFF;
            color: #31473A;
            border: 2px solid #31473A;
            transform: scale(1.02);
        }
        button.save {
            background-color: #8B0000;
            color: #FFFFFF;
            border: 2px solid #31473A;
        }
        button.save:hover {
            background-color: #31473A;
            color: #FFFFFF;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DOCUMENT CONTROL</h1>
        <button id="front-page">Intro Page</button>
        <button id="doc-prep">Document Preparation</button>
        <button id="doc-change-history">Document Change History</button>
        <button id="doc-dist-list">Document Distribution List</button>
        <button id="contents">Contents</button>
        <button id="intro">Introduction</button>
        <button id="eng-scope">Engagement Scope</button>
        <button id="audit-team">Details of the Auditing Team</button>
        <button id="audit-activities">Audit Activities and Timeline</button>
        <button id="audit-methodology">Audit Methodology and Criteria / Standard referred for audit</button>
        <button id="owasp">OWASP Top 2021 Ten Most Critical Web Application Vulnerabilities Mapping</button>
        <button id="sans">SANS-25 Most Critical Web Application Vulnerabilities Mapping</button>
        <button id="tools">Tools and Software used</button>
        <button id="appendix">Appendix</button>
        <button id="disclaimer">Disclaimer </button>
        <button id="save" class="save" onclick="saveDocumentControl()">Save and Redirect to Vulnerabilities</button>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('front-page').addEventListener('click', function() {
            window.location.href = '/title';
        });
        document.getElementById('doc-prep').addEventListener('click', function() {
            window.location.href = '/document_preparation';
        });
        document.getElementById('doc-change-history').addEventListener('click', function() {
            window.location.href = '/document_change_history';
        });
        document.getElementById('doc-dist-list').addEventListener('click', function() {
            window.location.href = '/document_distribution_list';
        });
        document.getElementById('contents').addEventListener('click', function() {
            window.location.href = '/contents';
        });
        document.getElementById('intro').addEventListener('click', function() {
            window.location.href = '/introduction';
        });
        document.getElementById('eng-scope').addEventListener('click', function() {
            window.location.href = '/engagement_scope';
        });
        document.getElementById('audit-team').addEventListener('click', function() {
            window.location.href = '/details_of_the_auditing_team';
        });
        document.getElementById('audit-activities').addEventListener('click', function() {
            window.location.href = '/audit_activities_and_timeline';
        });
        document.getElementById('audit-methodology').addEventListener('click', function() {
            window.location.href = '/audit_methodology_and_criteria';
        });
        document.getElementById('owasp').addEventListener('click', function() {
            window.location.href = '/owasp';
        });
        document.getElementById('sans').addEventListener('click', function() {
            window.location.href = '/sans';
        });
        document.getElementById('tools').addEventListener('click', function() {
            window.location.href = '/tools_and_software_used';
        });
        document.getElementById('appendix').addEventListener('click', function() {
            window.location.href = '/appendix';
        });
        document.getElementById('disclaimer').addEventListener('click', function() {
            window.location.href = '/disclaimer';
        });

        function saveDocumentControl() {
            fetch('/get_document_preparation_data')
                .then(response => response.json())
                .then(data => {
                    fetch('/save_document_control', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data),
                    })
                    .then(response => response.json())
                    .then(result => {
                        if (result.success) {
                            window.location.href = '/show_vulnerabilities'; // Redirect to vulnerabilities.html
                        } else {
                            alert('Error saving document control data');
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
                })
                .catch(error => {
                    console.error('Error fetching document preparation data:', error);
                });
        }
    </script>
</body>
</html>
